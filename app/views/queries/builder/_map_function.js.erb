<%
  # This partial defines the map function of MapReduce jobs. It handles the logic of blank UI zones, generates functions that match the passed in query_structure,
  # and emits requested information.
  #
  # Locals
  # query_structure - The JSON that represents the query for which we're writing the map function.
%>

function map(patient) {
  function find(patient) {
    var root = new Or(
    <% query_structure['find']['or'].each do |subelement| %>
      <%= render :partial => 'blah', :locals => { :tab_count = 0, :element => query_structure['find']['or'] } %>
    <% end %>
    );
  }
  
  function filter(patient) {
    var root = new Or(
    <% query_structure['find']['or'].each do |subelement| %>
      <%= render :partial => 'blah', :locals => { :tab_count = 0, :element => query_structure['filter']['or'] } %>
    <% end %>
    );
  }
}